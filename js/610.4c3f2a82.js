"use strict";(self["webpackChunkmycoffee"]=self["webpackChunkmycoffee"]||[]).push([[610],{5610:function(o,s,e){e.r(s),e.d(s,{default:function(){return P}});var l=function(){var o=this,s=o._self._c;return s("div",{staticClass:"goods-sell-card"},[o.goodsSellData.goodssellinfo?s("div",{staticClass:"goods-sell-img"},[s("swiper",{ref:"GoodsSellImgSwiper",attrs:{options:o.swiperOptions}},[o._l(o.goodsSellData.goodssellinfo.goodssellpic,(function(o,e){return s("swiper-slide",{key:e},[s("img",{attrs:{src:o}})])})),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1):o._e(),o.goodsSellData.goodssellinfo?s("div",{staticClass:"goods-sell-options"},[s("div",{staticClass:"goods-sell-option-container"},[s("div",{staticClass:"goods-sell-option-title"},[s("span",{staticClass:"goods-sell-option-title-text"},[o._v(o._s(o.goodsSellData.goodsname))])]),s("div",{staticClass:"goods-sell-option-content"},[s("goods-sell-option",{attrs:{goodsSellOptionData:o.goodsSellData.goodssellinfo.goodsselltype},on:{getGoodsSellOption:o.getGoodsSellOption}})],1)]),s("div",{staticClass:"goods-sell-collect"},[o.isGoodsCollected?s("div",{staticClass:"goods-sell-collect-icon"},[s("img",{attrs:{src:e(836),alt:""}})]):s("div",{staticClass:"goods-sell-collect-icon"},[s("img",{attrs:{src:e(6356),alt:""}})]),s("div",{staticClass:"goods-sell-collect-text"},[o._v("收藏口味")])])]):o._e(),o.goodsSellData.goodssellinfo?s("div",{staticClass:"goods-sell-desc-content"},[s("div",{staticClass:"goods-sell-desc-container"},[o._m(0),s("goods-sell-desc",{attrs:{goodsSellDescData:o.goodsSellData.goodssellinfo.goodssellinfopic}})],1)]):o._e(),s("div",{staticClass:"goods-sell-close-page",on:{click:o.closePageClick}},[s("close-page")],1),o.goodsSellData.goodssellinfo?s("div",{staticClass:"good-sell-add-cart-content"},[s("goods-sell-add-cart",{attrs:{goodsSellAddCartData:o.goodsSellAddCartData}})],1):o._e()])},t=[function(){var o=this,s=o._self._c;return s("div",{staticClass:"goods-sell-desc-title"},[s("span",{staticClass:"goods-sell-desc-title-text"},[o._v("商品描述")])])}],d=e(551),a=function(){var o=this;o._self._c;return o._m(0)},i=[function(){var o=this,s=o._self._c;return s("div",{staticClass:"close-page"},[s("img",{attrs:{src:e(9430)}})])}],g={name:"ClosePage"},c=g,n=e(3736),p=(0,n.Z)(c,a,i,!1,null,"0445aeb6",null),r=p.exports,u=function(){var o=this,s=o._self._c;return s("div",{staticClass:"goods-sell-option"},o._l(o.goodsSellOptionData,(function(e,l){return s("div",{key:e.goodsselltypeId,staticClass:"goods-sell-option-types"},[s("div",{staticClass:"goods-sell-option-type-name"},[s("span",{staticClass:"goods-sell-option-type-name-text"},[o._v(o._s(e.goodsselltypeName))])]),s("div",{staticClass:"goods-sell-option-type-content"},o._l(e.goodsselltypeDetails,(function(e,t){return s("div",{key:e.goodsselltypeDetailId,staticClass:"goods-sell-option-type-content-item"},[s("span",{staticClass:"goods-sell-option-type-content-item-text",class:{"goods-sell-option-type-content-item-text-selected":o.getCurrentOptionSelected(l,e.goodsselltypeDetailId)},on:{click:function(s){return o.goodsSellOptionClick(l,e.goodsselltypeDetailId,e.goodsselltypeDetailName)}}},[o._v(o._s(e.goodsselltypeDetailName))]),e.goodsselltypeDetailMark?s("span",{staticClass:"goods-sell-option-type-content-item-text-mark",class:{"goods-sell-option-type-content-item-text-mark-selected":e.goodsselltypeDetailMark}},[o._v(o._s(e.goodsselltypeDetailMark))]):o._e()])})),0)])})),0)},S=[],D={name:"GoodsSellOption",props:{goodsSellOptionData:{type:Array,default(){return[{goodsselltypeId:null,goodsselltypeName:null,goodsselltypeDetails:[{goodsselltypeDetailId:null,goodsselltypeDetailName:null,goodsselltypeDetailMark:null,goodsselltypeDetailSelect:!1}]}]}}},data(){return{currentOptionSelected:[]}},created(){this.currentOptionSelected=[],this.goodsSellOptionData.forEach((o=>{const s=o.goodsselltypeDetails.findIndex((o=>o.goodsselltypeDetailSelect));this.currentOptionSelected.push({goodsselltypeId:o.goodsselltypeId,goodsselltypeName:o.goodsselltypeName,goodsselltypeDetailIdSelected:o.goodsselltypeDetails[s].goodsselltypeDetailId,goodsselltypeDetailNameSelected:o.goodsselltypeDetails[s].goodsselltypeDetailName})}))},methods:{goodsSellOptionClick(o,s,e){this.$set(this.currentOptionSelected,o,{goodsselltypeId:this.goodsSellOptionData[o].goodsselltypeId,goodsselltypeName:this.goodsSellOptionData[o].goodsselltypeName,goodsselltypeDetailIdSelected:s,goodsselltypeDetailNameSelected:e}),this.$emit("getGoodsSellOption",this.currentOptionSelected)},getCurrentOptionSelected(o,s){const e=this.currentOptionSelected[o].goodsselltypeDetailIdSelected===s;return e}}},C=D,_=(0,n.Z)(C,u,S,!1,null,"415c0582",null),y=_.exports,m=function(){var o=this,s=o._self._c;return s("div",{staticClass:"goods-sell-desc"},o._l(o.goodsSellDescData,(function(o,e){return s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o,expression:"item"}],attrs:{alt:""}})})),0)},h=[],f={name:"GoodsSellDesc",props:{goodsSellDescData:{type:Array,default(){return[]}}}},v=f,A=(0,n.Z)(v,m,h,!1,null,"79e13b52",null),N=A.exports,w=function(){var o=this,s=o._self._c;return s("div",{staticClass:"goods-sell-add-cart"},[s("div",{staticClass:"goods-sell-add-cart-info"},[s("div",{staticClass:"goods-sell-add-cart-price"},[s("div",{staticClass:"goods-sell-add-cart-price-detail"},[s("span",{staticClass:"goods-sell-add-cart-price-new"},[o._v("￥"+o._s(o.goodsSellAddCartData.goodsprice_new))]),o.goodsSellAddCartData.goodsprice_old?s("span",{staticClass:"goods-sell-add-cart-price-old"},[o._v("￥"+o._s(o.goodsSellAddCartData.goodsprice_old))]):o._e(),o.goodsSellAddCartData.goodsprice_pre?s("span",{staticClass:"goods-sell-add-cart-price-pre"},[s("span",{staticClass:"goods-sell-add-cart-price-pre-tip"},[o._v("预估到手")]),s("span",{staticClass:"goods-sell-add-cart-price-pre-text"},[o._v("￥"+o._s(o.goodsSellAddCartData.goodsprice_pre))])]):o._e(),o._m(0)])]),s("div",{staticClass:"goods-sell-add-cart-number"},[s("span",{staticClass:"goods-sell-add-cart-sub",on:{click:o.goodsSellNumSub}},[s("img",{attrs:{src:e(5003),alt:""}})]),s("span",{staticClass:"goods-sell-add-cart-text"},[o._v(o._s(o.goodspieces))]),s("span",{staticClass:"goods-sell-add-cart-add",on:{click:o.goodsSellNumAdd}},[s("img",{attrs:{src:e(1506),alt:""}})])])]),s("div",{staticClass:"goods-sell-add-cart-name"},[o._v(o._s(o.goodSellAddCartName))]),s("div",{staticClass:"goods-sell-add-cart-action"},[s("div",{staticClass:"goods-sell-add-cart-action-buy"},[s("span",{staticClass:"goods-sell-add-cart-action-buy-btn",on:{click:o.goodsGoToBuy}},[o._v("立即购买")])]),s("div",{staticClass:"goods-sell-add-cart-action-add"},[s("span",{staticClass:"goods-sell-add-cart-action-add-btn",on:{click:o.goodsGotoCart}},[o._v("加入购物车")])])])])},O=[function(){var o=this,s=o._self._c;return s("span",{staticClass:"goods-sell-add-cart-price-desc"},[s("img",{attrs:{src:e(2812),alt:""}})])}],I=e(7123),k={name:"GoodsSellAddCart",props:{goodsSellAddCartData:{type:Object,default(){return{goodsid:null,goodsname:null,goodspic:null,goodsprice_new:null,goodsprice_old:null,goodsprice_pre:null,goodsoptionselected:null}}}},data(){return{goodspieces:1}},computed:{goodSellAddCartName(){if(this.goodsSellAddCartData.goodsid){const o=this.goodsSellAddCartData.goodsname;let s=this.goodsSellAddCartData.goodsprice_new,e="",l=0;return this.goodsSellAddCartData.goodsoptionselected.forEach((o=>{let s=o.goodsselltypeDetailNameSelected;const t=/\d/;if(-1===o.goodsselltypeName.indexOf("杯"))if(t.test(s)){l=s.replace(/[^\d]/g,"");const o=s.replace(/\d/g,"").replace("元","");e+="+"+o+"￥"+l}else e+="+"+s+"￥"+l})),o+"￥"+s+e}},getCartFinalPrice(){if(this.goodsSellAddCartData.goodsid){let o=this.goodsSellAddCartData.goodsprice_new,s=parseFloat(o);return this.goodsSellAddCartData.goodsoptionselected.forEach((o=>{let e=o.goodsselltypeDetailNameSelected;const l=/\d/;if(-1===o.goodsselltypeName.indexOf("杯")&&l.test(e)){const o=e.replace(/[^\d]/g,"");s+=parseFloat(o)}})),s}}},methods:{goodsSellNumSub(){if(this.goodspieces<2)return!1;this.goodspieces--},goodsSellNumAdd(){if(this.goodspieces>98)return!1;this.goodspieces++},goodsGoToBuy(){this.$router.push({name:"Login"}).catch((o=>!1))},goodsGotoCart(){const o={goods_final_id:this.goodsFinalId(),goodsid:this.goodsSellAddCartData.goodsid,goodsname:this.goodsSellAddCartData.goodsname,goodspic:this.goodsSellAddCartData.goodspic,goodsoption:this.goodsSellAddCartData.goodsoptionselected,goodsprice_new:this.goodsSellAddCartData.goodsprice_new,goodsprice_old:this.goodsSellAddCartData.goodsprice_old,goodsprice_pre:this.goodsSellAddCartData.goodsprice_pre,goodsprice_off:null,goodsprice_off_number:null,goodsprice_final:this.getCartFinalPrice,goodsprice_coupon:null,goodspiece:this.goodspieces,goodsshoptype:0,goodschecked:!0},s={cartData:o,cartDataType:"counts",cartcount:this.goodspieces};this.$store.dispatch(I.Mb,s),this.$toast.showCallBack("商品已放入购物车",500).then((()=>{this.$router.go(-1)}))},goodsFinalId(){if(this.goodsSellAddCartData.goodsid){const o=this.goodsSellAddCartData.goodsid;let s=[];return this.goodsSellAddCartData.goodsoptionselected.forEach((o=>{let e=o.goodsselltypeDetailIdSelected;s.push(e)})),o+"_"+s.join("_")}}}},x=k,b=(0,n.Z)(x,w,O,!1,null,"4f4bfece",null),G=b.exports,$={name:"GoodsSellCard",data(){return{goodsSellData:{goodsid:null,goodspic:null,goodsname:null,goodstips:null,goodsdesc:null,goodsdescfill:null,goodsprice_new:null,goodsprice_old:null,goodsSelected:!1,goodspieces:null,goodssellinfo:{goodssellpic:null,goodsinfopic:null,goodsselltype:[{goodsselltypeId:null,goodsselltypeName:null,goodsselltypeDetails:[{goodsselltypeDetailId:null,goodsselltypeDetailName:null,goodsselltypeDetailMark:null,goodsselltypeDetailSelect:!1}]}]}},swiperOptions:{loop:!0,autoplay:{disableOnInteraction:!1,delay:5e3},pagination:{el:".swiper-pagination",dynamicBullets:!0}},goodsSellAddCartData:{goodsid:null,goodsname:null,goodspic:null,goodsprice_new:null,goodsprice_old:null,goodsprice_pre:null,goodsoptionselected:null},isGoodsCollected:!1}},created(){this.goodsSellData=this.$route.params;let o=[];this.goodsSellData.goodssellinfo&&this.goodsSellData.goodssellinfo.goodsselltype.forEach((s=>{const e=s.goodsselltypeDetails.findIndex((o=>o.goodsselltypeDetailSelect));o.push({goodsselltypeId:s.goodsselltypeId,goodsselltypeName:s.goodsselltypeName,goodsselltypeDetailIdSelected:s.goodsselltypeDetails[e].goodsselltypeDetailId,goodsselltypeDetailNameSelected:s.goodsselltypeDetails[e].goodsselltypeDetailName})})),this.goodsSellAddCartData={goodsid:this.goodsSellData.goodsid,goodsname:this.goodsSellData.goodsname,goodspic:this.goodsSellData.goodspic,goodsprice_new:this.goodsSellData.goodsprice_new,goodsprice_old:this.goodsSellData.goodsprice_old,goodsprice_pre:18,goodsoptionselected:o}},methods:{closePageClick(){this.$router.go(-1)},getGoodsSellOption(o){this.goodsSellAddCartData={goodsid:this.goodsSellData.goodsid,goodsname:this.goodsSellData.goodsname,goodspic:this.goodsSellData.goodspic,goodsprice_new:this.goodsSellData.goodsprice_new,goodsprice_old:this.goodsSellData.goodsprice_old,goodsprice_pre:18,goodsoptionselected:o}}},components:{Swiper:d.Swiper,SwiperSlide:d.SwiperSlide,ClosePage:r,GoodsSellOption:y,GoodsSellDesc:N,GoodsSellAddCart:G}},F=$,M=(0,n.Z)(F,l,t,!1,null,"12474b95",null),P=M.exports},1506:function(o,s,e){o.exports=e.p+"img/action_add.36997c08.svg"},5003:function(o,s,e){o.exports=e.p+"img/action_sub.74904880.svg"},9430:function(o,s,e){o.exports=e.p+"img/closepage.006e41b6.svg"},6356:function(o,s,e){o.exports=e.p+"img/collect.a7e32484.svg"},836:function(o,s,e){o.exports=e.p+"img/collected.aadc763a.svg"},2812:function(o,s,e){o.exports=e.p+"img/tips.96e32bf3.svg"}}]);